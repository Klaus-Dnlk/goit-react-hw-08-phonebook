(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{33:function(t,e,n){"use strict";n.r(e),n.d(e,"getLoading",(function(){return c})),n.d(e,"getFilter",(function(){return r})),n.d(e,"getAllContacts",(function(){return a})),n.d(e,"getVisibleContacts",(function(){return u}));var c=function(t){return t.contacts.loading},r=function(t){return t.contacts.filter},a=function(t){return t.contacts.items},u=function(t){var e=a(t),n=r(t).toLowerCase();return e.filter((function(t){return t.name.toLowerCase().includes(n)}))}},34:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return u})),n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return h}));var c,r,a=n(9),u=n(33),s=n(2),i=Object(s.b)("contacts/filter"),o=n(3),l=n(29),d=n(10),f=Object(s.d)([],(c={},Object(o.a)(c,a.default.fetchContacts.fulfilled,(function(t,e){return e.payload})),Object(o.a)(c,a.default.addNewContact.fulfilled,(function(t,e){var n=e.payload;return[].concat(Object(l.a)(t),[n])})),Object(o.a)(c,a.default.deleteContact.fulfilled,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),c)),j=Object(s.d)(!1,(r={},Object(o.a)(r,a.default.fetchContacts.pending,(function(){return!0})),Object(o.a)(r,a.default.fetchContacts.fulfilled,(function(){return!1})),Object(o.a)(r,a.default.fetchContacts.rejected,(function(){return!1})),Object(o.a)(r,a.default.addNewContact.pending,(function(){return!0})),Object(o.a)(r,a.default.addNewContact.fulfilled,(function(){return!1})),Object(o.a)(r,a.default.addNewContact.rejected,(function(){return!1})),Object(o.a)(r,a.default.deleteContact.pending,(function(){return!0})),Object(o.a)(r,a.default.deleteContact.fulfilled,(function(){return!1})),Object(o.a)(r,a.default.deleteContact.rejected,(function(){return!1})),r)),b=Object(s.d)("",Object(o.a)({},i,(function(t,e){return e.payload}))),O=Object(s.d)(null,{}),h=Object(d.b)({items:f,filter:b,loading:j,error:O})},4:function(t,e,n){t.exports={title:"Styles_title__2O54i",section:"Styles_section__3hTyO",contact_form:"Styles_contact_form__mmTsL",contact_formLabel:"Styles_contact_formLabel__1v9Pz",inputWindow:"Styles_inputWindow__3UisN",filterBox:"Styles_filterBox__ZLGqB",filterInput:"Styles_filterInput___T2kw",contactList:"Styles_contactList__12ZdO",listItem:"Styles_listItem__1jBtj",btn:"Styles_btn__20x5-",link:"Styles_link__26V-S",activeLink:"Styles_activeLink__13zUj",user_container:"Styles_user_container__3xVOA",user_name:"Styles_user_name__1SET3",avatar:"Styles_avatar__2P1cv"}},78:function(t,e,n){},8:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return g}));var c=n(6),r=n.n(c),a=n(19),u=n(12),s=n.n(u),i=n(2);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var o,l=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},d=function(){s.a.defaults.headers.common.Authorization=""},f=Object(i.c)("auth/register",function(){var t=Object(a.a)(r.a.mark((function t(e){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/signup",e);case 3:return n=t.sent,c=n.data,l(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),j=Object(i.c)("auth/login",function(){var t=Object(a.a)(r.a.mark((function t(e){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/login",e);case 3:return n=t.sent,c=n.data,l(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),b=Object(i.c)("auth/logout",Object(a.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/logout");case 3:d(),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))),O=Object(i.c)("auth/refresh",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c,a,u,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),null!==(a=c.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return l(a),t.prev=5,t.next=8,s.a.get("/users/current");case 8:return u=t.sent,i=u.data,t.abrupt("return",i);case 13:t.prev=13,t.t0=t.catch(5);case 15:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()),h={register:f,logIn:j,logOut:b,fetchCurrentUser:O},p={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name}},v=n(3),g=Object(i.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:(o={},Object(v.a)(o,h.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(v.a)(o,h.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(v.a)(o,h.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(v.a)(o,h.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0})),o)}).reducer},88:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(27),u=n.n(a),s=n(17),i=n(7),o=n(45),l=n(29),d=n(2),f=n(20),j=n(46),b=n.n(j),O=n(34),h=n(8),p=Object(l.a)(Object(d.f)({serializableCheck:{ignoredActions:[f.a,f.f,f.b,f.c,f.d,f.e]}})),v={key:"auth",storage:b.a,whitelist:["token"]},g=Object(d.a)({reducer:{auth:Object(f.g)(v,h.b),contacts:O.c},middleware:p,devTools:!1}),x=Object(f.h)(g),m=(n(78),n(13)),_=n(1);function k(t){var e=t.children;return Object(_.jsx)("div",{children:e})}var y=n(4),C=n.n(y);function w(){var t=Object(i.c)(h.c.getIsLoggedIn);return Object(_.jsxs)("nav",{children:[Object(_.jsx)(s.b,{to:"/",exact:!0,className:C.a.link,activeClassName:C.a.activeLink,children:"Home"}),t&&Object(_.jsx)(s.b,{to:"/contacts",exact:!0,className:C.a.link,activeClassName:C.a.activeLink,children:"Contacts"})]})}function L(){return Object(_.jsxs)("div",{children:[Object(_.jsx)(s.b,{to:"/register",exact:!0,className:C.a.link,activeClassName:C.a.activeLink,children:"Registration"}),Object(_.jsx)(s.b,{to:"/login",exact:!0,className:C.a.link,activeClassName:C.a.activeLink,children:"Sign in"})]})}var I=n.p+"static/media/userAva.12e634ac.png";function S(){var t=Object(i.b)(),e=Object(i.c)(h.c.getUsername),n=I;return Object(_.jsxs)("div",{className:C.a.user_container,children:[Object(_.jsx)("img",{src:n,alt:"",width:"32",className:C.a.avatar}),Object(_.jsxs)("span",{className:C.a.user_name,children:["Welcome, ",e]}),Object(_.jsx)("button",{type:"button",onClick:function(){return t(h.a.logOut())},className:C.a.btn,children:"Log Out"})]})}function N(){var t=Object(i.c)(h.c.getIsLoggedIn);return Object(_.jsxs)("header",{className:C.a.section,children:[Object(_.jsx)(w,{}),t?Object(_.jsx)(S,{}):Object(_.jsx)(L,{})]})}var z=n(18),U=n(28),V=["children"];function W(t){var e=t.children,n=Object(U.a)(t,V),c=Object(i.c)(h.c.getIsLoggedIn);return Object(_.jsx)(m.b,Object(z.a)(Object(z.a)({},n),{},{children:c?e:Object(_.jsx)(m.a,{to:"/login"})}))}var A=["children","restricted"];function B(t){var e=t.children,n=t.restricted,c=void 0!==n&&n,r=Object(U.a)(t,A),a=Object(i.c)(h.c.getIsLoggedIn)&&c;return Object(_.jsx)(m.b,Object(z.a)(Object(z.a)({},r),{},{children:a?Object(_.jsx)(m.a,{to:"/"}):e}))}var T=Object(c.lazy)((function(){return n.e(6).then(n.bind(null,92))})),R=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,93))})),E=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,94))})),J=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,95))}));function P(){var t=Object(i.b)();return Object(c.useEffect)((function(){t(h.a.fetchCurrentUser())}),[t]),Object(_.jsxs)(k,{children:[Object(_.jsx)(N,{}),Object(_.jsx)(m.d,{children:Object(_.jsxs)(c.Suspense,{fallback:Object(_.jsx)("p",{children:"Loading..."}),children:[Object(_.jsx)(B,{exact:!0,path:"/",children:Object(_.jsx)(T,{})}),Object(_.jsx)(B,{path:"/register",restricted:!0,children:Object(_.jsx)(R,{})}),Object(_.jsx)(B,{path:"/login",restricted:!0,children:Object(_.jsx)(E,{})}),Object(_.jsx)(W,{path:"/contacts",children:Object(_.jsx)(J,{})})]})})]})}u.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(i.a,{store:g,children:Object(_.jsx)(o.a,{loading:null,persistor:x,children:Object(_.jsx)(s.a,{children:Object(_.jsx)(P,{})})})})}),document.getElementById("root"))},9:function(t,e,n){"use strict";n.r(e),n.d(e,"fetchContacts",(function(){return o})),n.d(e,"addNewContact",(function(){return l})),n.d(e,"deleteContact",(function(){return d}));var c=n(6),r=n.n(c),a=n(19),u=n(12),s=n.n(u),i=n(2);s.a.defaults.baseURL="https://61980945164fa60017c22f32.mockapi.io";var o=Object(i.c)("contacts/fetchContacts",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c,a,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.rejectWithValue,t.prev=1,t.next=4,s.a.get("/contacts");case 4:return a=t.sent,u=a.data,t.abrupt("return",u);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",c(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),l=Object(i.c)("contacts/addNewContact",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c,a,u,i,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.name,a=e.number,u=n.rejectWithValue,t.prev=2,t.next=5,s.a.post("/contacts",{name:c,number:a});case 5:return i=t.sent,o=i.data,t.abrupt("return",o);case 10:t.prev=10,t.t0=t.catch(2),u(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()),d=Object(i.c)("contacts/deleteContact",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.rejectWithValue,t.prev=1,t.next=4,s.a.delete("/contacts/".concat(e));case 4:return t.abrupt("return",e);case 7:t.prev=7,t.t0=t.catch(1),c(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}());e.default={fetchContacts:o,addNewContact:l,deleteContact:d}}},[[88,1,2]]]);
//# sourceMappingURL=main.5d075e26.chunk.js.map